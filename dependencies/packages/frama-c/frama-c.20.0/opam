opam-version: "2.0"
synopsis: "Platform dedicated to the analysis of source code written in C"
maintainer: "francois.bobot@cea.fr"
authors: [
  "Michele Alberti"
  "Thibaud Antignac"
  "Gergö Barany"
  "Patrick Baudin"
  "Allan Blanchard"
  "Lionel Blatter"
  "François Bobot"
  "Richard Bonichon"
  "Quentin Bouillaguet"
  "David Bühler"
  "Zakaria Chihani"
  "Loïc Correnson"
  "Julien Crétin"
  "Pascal Cuoq"
  "Zaynah Dargaye"
  "Jean-Christophe Filliâtre"
  "Philippe Herrmann"
  "Maxime Jacquemin"
  "Florent Kirchner"
  "Tristan Le Gall"
  "Jean-Christophe Léchenet"
  "Matthieu Lemerre"
  "Dara Ly"
  "David Maison"
  "Claude Marché"
  "André Maroneze"
  "Thibault Martin"
  "Fonenantsoa Maurica"
  "Melody Méaulle"
  "Benjamin Monate"
  "Yannick Moy"
  "Anne Pacalet"
  "Valentin Perrelle"
  "Guillaume Petiot"
  "Virgile Prevosto"
  "Armand Puccetti"
  "Virgile Robles"
  "Muriel Roger"
  "Julien Signoles"
  "Kostyantyn Vorobyov"
  "Boris Yakobowski"
]
homepage: "http://frama-c.com/"
license: "GNU Lesser General Public License version 2.1"
dev-repo: "git+https://git.frama-c.com/pub/frama-c.git"
doc: "http://frama-c.com/download/user-manual-20.0-Calcium.pdf"
bug-reports: "https://bts.frama-c.com/"
tags: [
  "deductive"
  "program verification"
  "formal specification"
  "automated theorem prover"
  "interactive theorem prover"
  "C"
  "plugins"
  "abstract interpretation"
  "slicing"
  "weakest precondition"
  "ACSL"
  "dataflow analysis"
  "runtime verification"
]

build: [
  ["autoconf"] {pinned}
  [
    "./configure"
      "--prefix" prefix
      "--disable-gui"
      "--mandir=%{man}%"
      "--disable-server"
      "--disable-server-zeromq"
      "--disable-studia"
      "--disable-wp"
      "--disable-wp-coq"
  ]
  [make "-j%{jobs}%"]
  [make "-C" "doc" "download"] {with-doc}
]

install: [
  [make "install"]
  [make "-C" "doc" "install"] {with-doc}
]

depends: [
  "ocaml"
  "ocamlgraph"
  "ocamlfind"
  "zarith"
  "alt-ergo-free"
  "yojson"
]

messages: [
  "The Frama-C/Wp now uses Why-3 for all provers (Cf. deprecated -wp-prover native:alt-ergo)"
  {alt-ergo:installed}
  "The Frama-C/Wp native support for Coq is now deprecated (use TIP or Why-3 instead)."
  {coq:installed}
  "WARNING: There is a known issue with OCaml 4.05.0 and ocamlfind 1.8.1 (https://github.com/ocaml/opam-repository/issues/10925) when upgrading from a previous ocamlfind. If the compilation of Frama-C fails, try downgrading ocamlfind to 1.8.0 or upgrading OCaml to > 4.05.0." { ocaml:version = "4.05.0" & ocamlfind:version = "1.8.1" }
]

patches: "ranlib.patch"

url {
  src: "https://frama-c.com/download/frama-c-20.0-Calcium.tar.gz"
  checksum: "md5=47b9a0a246ae172384dd927516ab184c"
}
